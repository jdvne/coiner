<!DOCTYPE html>
<html>

<!-- 
    TODO:
        search menu filtering
        arrow function
        anonymous function
        add account details to logged in page
    josh -
        make chart appropriate for our usage
        random chart value generator
        make page for a specific coin (coin.html)
        user account + purchases
    abdullah -
        expand search bar on selection
        check if username is valid
    end -
        add a bunch of css
        responsivity check
        add site logo and favicon
 -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Joshua Devine and Abdullah Chaudry">
    <meta name="description" content="Let Coiner handle all your Cryptocurrency needs">

    <title>Coiner</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script><param name="" value="">
    <script src="utils.js"></script>
    <script src="search.js"></script>

</head>

<body>
    <header>
        <nav class="navbar navbar-expand-md bg-dark navbar-dark">
            <a class="navbar-brand" href="#">My Logo Would Be Here</a>

            <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item" id="main-signup">
                        <a class="nav-link" href="#">Signup</a>
                    </li>
                    <li class="nav-item" id="main-login">
                        <a class="nav-link" href="#">Login</a> 
                    </li>
                    <li class="nav-item">
                        <form class="form-inline">
                            <input id="main-search-bar" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                        </form>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="jumbotron">
        <div class="container">
            <h1>Start Investing in Crypto Today!</h1>
            <p>Some more info elaborating :)</p>
            <div>
                <canvas id="canvas" height="400"></canvas>
            </div>
            <br>
            <br>
            <button id="randomizeData">Randomize Data</button>
            <button id="addDataset">Add Dataset</button>
            <button id="removeDataset">Remove Dataset</button>
            <button id="addData">Add Data</button>
            <button id="removeData">Remove Data</button>
            <script>
                var MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                var config = {
                    type: 'line',
                    data: {
                        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
                        datasets: [{
                            label: 'Actual Price',
                            backgroundColor: window.chartColors.red,
                            borderColor: window.chartColors.red,
                            data: [
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor(),
                                randomScalingFactor()
                            ],
                            fill: false,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        title: {
                            display: true,
                            text: 'Chart.js Line Chart'
                        },
                        tooltips: {
                            mode: 'index',
                            intersect: false,
                        },
                        hover: {
                            mode: 'nearest',
                            intersect: true
                        },
                        scales: {
                            xAxes: [{
                                display: true,
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Month'
                                }
                            }],
                            yAxes: [{
                                display: true,
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Value'
                                }
                            }]
                        }
                    }
                };
        
                window.onload = function() {
                    var ctx = document.getElementById('canvas').getContext('2d');
                    window.myLine = new Chart(ctx, config);
                };
        
                document.getElementById('randomizeData').addEventListener('click', function() {
                    config.data.datasets.forEach(function(dataset) {
                        dataset.data = dataset.data.map(function() {
                            return randomScalingFactor();
                        });
        
                    });
        
                    window.myLine.update();
                });
        
                var colorNames = Object.keys(window.chartColors);
                document.getElementById('addDataset').addEventListener('click', function() {
                    var colorName = colorNames[config.data.datasets.length % colorNames.length];
                    var newColor = window.chartColors[colorName];
                    var newDataset = {
                        label: 'Dataset ' + config.data.datasets.length,
                        backgroundColor: newColor,
                        borderColor: newColor,
                        data: [],
                        fill: false
                    };
        
                    for (var index = 0; index < config.data.labels.length; ++index) {
                        newDataset.data.push(randomScalingFactor());
                    }
        
                    config.data.datasets.push(newDataset);
                    window.myLine.update();
                });
        
                document.getElementById('addData').addEventListener('click', function() {
                    if (config.data.datasets.length > 0) {
                        var month = MONTHS[config.data.labels.length % MONTHS.length];
                        config.data.labels.push(month);
        
                        config.data.datasets.forEach(function(dataset) {
                            dataset.data.push(randomScalingFactor());
                        });
        
                        window.myLine.update();
                    }
                });
        
                document.getElementById('removeDataset').addEventListener('click', function() {
                    config.data.datasets.splice(0, 1);
                    window.myLine.update();
                });
        
                document.getElementById('removeData').addEventListener('click', function() {
                    config.data.labels.splice(-1, 1); // remove the label first
        
                    config.data.datasets.forEach(function(dataset) {
                        dataset.data.pop();
                    });
        
                    window.myLine.update();
                });
            </script>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col"></th>
                    <th scope="col">Crypto</th>
                    <th scope="col">Price Change</th>
                    <th scope="col">Current Price</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="color: green">
                    <th scope="row"></th>
                    <td>Bitcoin</td>
                    <td>▲ $2,337</td>
                    <td>$49,237</td>
                  </tr>
                  <tr style="color: green">
                    <th scope="row" ></th>
                    <td>Etherium</td>
                    <td>▲ $23.27</td>
                    <td>$1,507.27</td>
                  </tr>
                  <tr style="color: red">
                    <th scope="row"></th>
                    <td>Dogecoin</td>
                    <td>▼ $.005</td>
                    <td>$.04936</td>
                  </tr>
                <tr style="color: red">
                  <th scope="row"></th>
                  <td>Litecoin</td>
                  <td>▼ $202.81</td>
                  <td>$20.04</td>
                </tr>
                <tr style="color: red">
                    <th scope="row"></th>
                    <td>Cardano</td>
                    <td>▼ $1.64532</td>
                    <td>$.14324</td>
                  </tr>
                <tr style="color: green">
                    <th scope="row"></th>
                    <td>Polkadot</td>
                    <td>▼ $38.69</td>
                    <td>$3.37</td>
                  </tr>
                <tr style="color: red">
                    <th scope="row"></th>
                    <td>Bitcoin Cash</td>
                    <td>▼ $543.53</td>
                    <td>$30.22</td>
                  </tr>
                <tr style="color: green">
                    <th scope="row"></th>
                    <td>Stellar</td>
                    <td>▼ $.41692</td>
                    <td>$.07352</td>
                  </tr>
                <tr style="color: green">
                    <th scope="row"></th>
                    <td>Chainlink</td>
                    <td>▼ $30.57</td>
                    <td>$1.97</td>
                  </tr>
                </tbody>
              </table>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
        crossorigin="anonymous"></script>

</body>
</html>